<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>The Annotated M[UMPS] Standards</title></head>
<body bgcolor="#4c76ac" text="#ecd264" link="#bca234" vlink="#bca234">
<form method="post" action="AnnoStd.html">
<input type="hidden" name="Frame" value="Search"/>
<input type="text" name="Search" size="20"/>
<input type="submit" value="Search"/></form><table width="91%"><tr>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1977.html"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1984.html"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1990.html"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1995.html"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=MDC.html"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=notes.html"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesa.gif"/></a></td>
<td width="13%" align="center"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesd.gif"/></td></tr>
<tr><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107108&amp;Edition=examples.html"><span style="font-size: 72px">&#9756;</span></a></td><td colspan="5" align="center"><h2>$TEXT</h2><h3>M[UMPS] by Example</h3></td><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107111&amp;Edition=examples.html"><span style="font-size: 72px">&#9758;</span></a></td></tr></table><a name="Def_0001"></a>
<p>Introduced in the 1977 ANSI M[UMPS] language standard.</p>
<p>This function returns the text of a line of M[UMPS] code.</p>
<p>Assume that the following program is stored:</p>
<pre>
PGM  ;Author;Comment
     <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> WHERE=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+0)
1    <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> Y=3 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> Y
     <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108045.html#Def_0002">Read</a> X
LAB1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,X
</pre>
<p><tt><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(PGM)="PGM ; Author;Comment"<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(LAB1)="LAB1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,X"<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(PGM+1)="1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> Y=3 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> Y"<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+1)="PGM ; Author;Comment"<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(LAB1+1)=""<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(1+1)=" <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108045.html#Def_0002">Read</a> X"<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> B=3<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+B)=" <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108045.html#Def_0002">Read</a> X"</tt></p>
<p>If this program is executed, the value of <tt>WHERE</tt>,
in the second line of the program, will become equal to the
name of the routine (<tt>"PGM"</tt>).</p>
<p>The following line of code will print a program:<br/>
<tt><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108031.html#Def_0002">For</a> I=1:1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> X=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+I)
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>:X=""&nbsp;&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> X,!</tt></p>
<p><b>Notes</b>:<br/>
A line in a program looks like:</p>
<p><i>Optional</i>: label with optional parameter list<br/>
<i>Mandatory</i>: line start character (space)<br/>
<i>Optional</i>: commands<br/>
<i>Optional</i> comment</p>
<p>This means that:</p>
<ul>
<li>The "simplest" program line is a single space.</li>
<li>A "valid" line cannot contain control-characters, not even a "tab"</li>
<li>A "valid" line cannot contain spurious characters</li>
</ul>
<p>Many groups of programmers use conventions to make the content of the
first line of a routine be according to a specific format, so that these
"first lines" can be used for internal reports.</p>
<p><tt>&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,"Routine",?12,"Author(s)",!
&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> R=""
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108031.html#Def_0002">For</a>&nbsp;&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> R=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107100.html#Def_0002">$Order</a>(<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107040.html#Def_0002">^$Routine</a>(R))
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>:R=""&nbsp;&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a><br/>
&nbsp;.&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> x=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+1^@R) <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,R,?12,<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107101.html#Def_0002">$Piece</a>(X,";",2)</tt></p>
<p><b>Note</b>: Many of such conventions exist, and most can be supported by
code written in ANSI standard M[UMPS]. The standard, however, does not
endorse any specific format convention for the first line of a routine.</p>
<p>Assume that the the source code of a section of a routine
looks like:</p>
<pre>
 ...
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108031.html#Def_0002">For</a> I=1:1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> X=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(HDR+I) <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>:X=" --"  <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,X
 ...
HDR ;
 End Of Year Report
 Section XXX
 --
 ...
</pre>
<p>The three lines that follow the label <tt>HDR</tt> do <b><i>not</i></b>
conform to the syntax of a M[UMPS] routine, and may cause problems when
loading the source code as a routine into a M[UMPS] environemnt.</p>
<p>Although this particular usage appears to have been quite popular at
one time, there never was a language standard that supported such usage.</p>
<p>Methods of performing the intended task that do conform to the
ANSI language standard would be:</p>
<pre>
 ...
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108031.html#Def_0002">For</a> I=1:1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> X=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(HDR+I) <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>:X=" --"  <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>
 . <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> !,<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107089.html#Def_0002">$Extract</a>(X,3,<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107095.html#Def_0002">$Length</a>(X))
 ...
HDR ;
 ;End Of Year Report
 ;Section XXX
 ;--
 ...
</pre>
<p>Or simply:</p>
<pre>
 ...
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a> HDR
 ...
HDR ;
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a>!,"End Of Year Report"
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a>!,"Section XXX"
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>
 ...
</pre>
<p>Addition in the 1984 ANSI M[UMPS] language standard.</p>
<p>A special meaning is given to the reference <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+0).
This reference will return the name of the currently executing
routine.</p>
<p>Modification in the 1990 M[UMPS] language standard.</p>
<p>The 1984 language standard contained imprecise wording that 
indicated that the spaces for a line-start should be compressed
in the function value and be represented as one single space.
This wording was changed to reflect the original intent, which is
to represent a line "as it is in the source code".</p>
<p>Addition in the 1995 ANSI M[UMPS] language standard.</p>
<p>The following line of code will print a program:<br/>
<tt><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108031.html#Def_0002">For</a> I=1:1 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> X=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(+I^ROUT)
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a>:X=""&nbsp;&nbsp;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> X,!</tt></p>
<p><b>Note</b>: a reference like +OFFSET^ROUTINE is acceptable
as a parameter for <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>, but not as an argument for
the commands <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a> and <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108032.html#Def_0002">Goto</a>.</p>
<p>Approved for addition in a future M[UMPS] language standard.</p>
<p>Trailing spaces are allowed at the end of a line.</p>
<p>This means that it would be valid to create a routine containing
commands like
(in subroutine <tt>A</tt> the character &#164; has been used to
make all space characters visible):</p>
<p><tt> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108057.html#Def_0002">Xecute</a> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(A+1)_<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(A+5)<br/>
 ...<br/>
 <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1990&amp;Page=a108044.html#Def_0003">Quit</a><br/>
A&#164;;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a>&#164;START=1&#164;&#164;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;VALIDATE1&#164;&#164;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;VALIDATE2&#164;&#164;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;QUERY7&#164;&#164;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;RESET9&#164;&#164;<br/>
&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;VALIDATE11&#164;&#164;<br/>
&#164;;;&#164;--&#164;end</tt></p>
<p>and the code that would be <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108057.html#Def_0002">Xecute</a>d would be:</p>
<p><tt>&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a>&#164;START=1&#164;&#164;&#164;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a>&#164;RESET9&#164;&#164;</tt></p>
<p>Examples with naked references:</p>
<p><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(LINEREF)<br/>
<tt><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> ^ABC(1,2)="reset <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107011.html#Def_0005">naked indicator</a>"</tt><br/>
; <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107011.html#Def_0005">naked indicator</a> is now <tt>^ABC(1,<br/>
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> ^(3,4)=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107109.html#Def_0002">$Text</a>(@^(5,6))</tt><br/>
; 1. fetch ^(5,6) = <tt>^ABC(1,5,6)</tt><br/>
; 2. store ^(3,4) = <tt>^ABC(1,5,3,4)</tt><br/>
; <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107011.html#Def_0005">naked indicator</a> is now: <tt>^ABC(1,5,3,</tt></p>
<table width="91%"><tr>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1977.html"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1984.html"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1990.html"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=1995.html"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=MDC.html"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a107109&amp;Edition=notes.html"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesa.gif"/></a></td>
<td width="13%" align="center"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesd.gif"/></td></tr></table>
<p>Copyright &copy; Standard Documents; 1977-2023 MUMPS Development Committee;<br/>
Copyright &copy; Examples: 1995-2023 Ed de Moel;<br/>
Copyright &copy; Annotations: 2003-2008 Jacquard Systems Research<br/>
Copyright &copy; Annotations: 2008-2023 Ed de Moel.</p>
<p><b><i>The information in this page is
NOT authoritative and subject to be modified
at any moment.<br/>Please consult the
appropriate (draft) language standard for an
authoritative definition.</i></b></p>
<p><b><i>Some specifications are "approved
for inclusion in a future standard". Note
that the MUMPS Development Committee cannot
guarantee that such future standards will
indeed be published.</i></b></p>
<p><font size="-1">This page most recently updated on 13-Sep-2014, 16:33:50.</font></p>
<p>For comments, <a href="mailto:demoel@jacquardsystems.com?Subject=Annotated%20Standards%20%28Frame%3dMain%2fPage%3da107109%2fEdition%3dexamples%29">contact Ed de Moel (demoel@jacquardsystems.com)</a></p>
</body>
</html>
