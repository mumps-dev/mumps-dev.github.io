<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>The Annotated M[UMPS] Standards</title></head>
<body bgcolor="#4c76ac" text="#ecd264" link="#bca234" vlink="#bca234">
<form method="post" action="AnnoStd.html">
<input type="hidden" name="Frame" value="Search"/>
<input type="text" name="Search" size="20"/>
<input type="submit" value="Search"/></form><table width="91%"><tr>
<td width="13%" align="center"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995c.gif"/></td>
<td width="13%" align="center"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCc.gif"/></td>
<td width="13%" align="center"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesc.gif"/></td>
<td width="13%" align="center"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesd.gif"/></td></tr>
<tr><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a901016&amp;Edition=examples.html"><span style="font-size: 72px">&#9756;</span></a></td><td colspan="5" align="center"><h2>Pattern Match Operator</h2><h3>M[UMPS] by Example</h3></td><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a901018&amp;Edition=examples.html"><span style="font-size: 72px">&#9758;</span></a></td></tr></table><a name="Def_0001"></a>
<h2>Relational operator 'matches pattern' (?)</h2>
<p>Introduced in the 1977 ANSI M[UMPS] language standard.</p>
<p>The pattern-codes to be used in pattern-matching are:<br/>
<tt><b>A</b></tt>: the 26 upper and 26 lower-case alphabetic
characters<br/>
<tt><b>C</b></tt>: the 33 control-characters<br/>
<tt><b>E</b></tt>: the 128 characters in the ASCII set<br/>
<tt><b>L</b></tt>: the 26 lower-case characters<br/>
<tt><b>N</b></tt>: the 10 digits<br/>
<tt><b>P</b></tt>: the 33 punctuation-characters<br/>
<tt><b>U</b></tt>: the 26 upper-case characters</p>
<p>Modified for internationalization in the 1995 ANSI M[UMPS]
language standard:<br/>
<tt><b>A</b></tt>: upper and lower-case characters<br/>
<tt><b>C</b></tt>: control-characters<br/>
<tt><b>E</b></tt>: all characters in the character set<br/>
<tt><b>L</b></tt>: lower-case characters<br/>
<tt><b>N</b></tt>: digits<br/>
<tt><b>P</b></tt>: punctuation-characters<br/>
<tt><b>U</b></tt>: upper-case characters</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?3N1"."2N.U</tt><br/>
1 (<i>true</i>) when the value of variable <tt>X</tt> matches a
pattern that "looks like" 3 digits, one point, 2 digits and any
number of upper-case symbols, 0 (<i>false</i>) otherwise:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?2U1"-"2N1"-"2U</tt><br/>
1 (<i>true</i>) when  the value of variable <tt>X</tt> matches
the pattern of a 1985 Dutch license plate, 0 (<i>false</i>)
otherwise:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?3N1"."1.5N</tt><br/>
1 (<i>true</i>) when  the value of variable <tt>X</tt> is a
positive number, less than 1000 with at least 1 and at most 5
digits following the decimal point, 0 (<i>false</i>)
otherwise:</p>
<p>Addition in the 1995 ANSI M[UMPS] language standard</p>
<p>In order to support the Japanese character sets, two new
pattern identifiers are added:</p>
<p><img alt="KA" src="../image/AnnoStd/ka.gif" width="18" height="18"/> for Kanji
(<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107085.html#Def_0002">$Char</a>(161) - <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107085.html#Def_0002">$Char</a>(223))<br/>
<img alt="ZEN" src="../image/AnnoStd/zen.gif" width="18" height="18"/> for JIS
(<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107085.html#Def_0002">$Char</a>(8481) - <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107085.html#Def_0002">$Char</a>(32382))</p>
<p>Additions in the 1995 ANSI M[UMPS] language standard (and
correction in a future) M[UMPS] language standard:</p>
<p>The concept of 'alternation' is introduced. An 'alternation' is a
list of possible patterns that each are a valid match for a
pattern.</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?2N1(3P2A,2P3A).E</tt><br/>
is equivalent to<br/>
&nbsp; &nbsp; &nbsp; &nbsp; <tt>(X?2N3P2A.E)!(X?2N2P3A.E)</tt></p>
<p><tt>X?2N1"-"1(3N1"-"1N,1N1":"4N)</tt><br/>
would match <tt>"12-345-6"</tt> and <tt>"12-3:4567"</tt>.</p>
<p><tt>X?.1(1"("3N1")".1(1"-",1"_"))3N.1(1"-",1"_")4N</tt><br/>
would match any of:<br/>
<tt>&nbsp; &nbsp; &nbsp; &nbsp; 5551212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; 555-1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; 555_1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)5551212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)555-1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)555_1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)-5551212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)-555-1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)-555_1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)_5551212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)_555-1212<br/>
&nbsp; &nbsp; &nbsp; &nbsp; (000)_555_1212</tt></p>
<p>Approved for addition in a future M[UMPS] language standard:</p>
<p>In order to support the character ISO-8859-1/USA, a new
pattern identifier is added:</p>
<p><tt><b>I</b></tt>: "International" characters (any non-ASCII characters
in ISO-8859-1/USA).</p>
<p>It is made possible to exclude certain patterns:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?.'C</tt><br/>
1 (<i>true</i>) when the value of variable <tt>X</tt> does not
contain any control characters, 0 (<i>false</i>)
otherwise:</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; <tt>X?1"Y".'"Y"1"Y"</tt><br/>
1 (<i>true</i>) when the value of variable <tt>X</tt> starts and
ends with the letter <tt>"Y"</tt>, and no other occurrences of
that letter are present in that value, 0 (<i>false</i>)
otherwise:</p>
<p>The concept of "ranges" is introduced. It is made possible to
specify that a pattern is matched when one of a set of specified
characters occurs:</p>
<table width="95%">
<tr><th align="right" width="45%">Reference</th>
<th width="5%">&nbsp;</th>
<th align="left" width="45%">Value</th></tr>
<tr><td align="right"><tt>"word"?.["aeiouAEIOU"]</tt></td>
<td>&nbsp;</td>
<td align="left">0 (<i>false</i>)</td></tr>
<tr><td align="right"><tt>"ff3a"?.["a":"f"]["A":"F"]N</tt></td>
<td>&nbsp;</td>
<td align="left">1 (<i>true</i>)</td></tr>
</table>
<p>The first pattern would be matched by strings that contain only
vowels; the second pattern would be matched by purely hexadecimal
numbers.</p>
<p>As a new feature, it has been made possible to extract the
substring that matches a specific sub-pattern from the string
that is being "matched". When using this new feature, the name of
the variable that is to receive the string-segment in question is
named between parentheses following the pattern-atom that it is
intended to match.</p>
<p>Assume that the value of local variable <tt>X</tt> matches the
following pattern: <tt>X?4N1","1.3N</tt>, i.e. 4 numeric digits, one comma
and then between one and 3 more digits. The code segment:<br/>
<tt><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108035.html#Def_0002">If</a> '(X?4N(ITEM)1","1.3N(QUANT(ITEM)) <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108026.html#Def_0002">Do</a> ...</tt><br/>
would cause the values of local variables <tt>ITEM</tt> and 
<tt>QUANT(ITEM)</tt> to be set to <tt>ITEM=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107089.html#Def_0002">$Extract</a>(X,1,4)</tt>
(the part that matches <tt>4N</tt>)
and <tt>QUANT(ITEM)=<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107089.html#Def_0002">$Extract</a>(X,6,<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a107095.html#Def_0002">$Length</a>(X))</tt>
(the part that matches <tt>1.3N</tt>).</p>
<p>Note that the assignment occurs as the pattern is being
matched (strict left-to-right), so that the value of local
variable <tt>ITEM</tt> is well defined when the pattern matching processor
will attempt to assign a value to <tt>QUANT(ITEM)</tt>.</p>
<p>Finally, a special case of indirection is pattern indirection:<br/>
<tt>&gt;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> string="123-44-5678"<br/>
&gt;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> string?3N1"-"2N1"-"4N<br/>
1<br/>
&gt;><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108048.html#Def_0002">Set</a> pattern="3N1""-""2N1""-""4N"<br/>
&gt;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> pattern<br/>
3N1"-"2N1"-"4N<br/>
&gt;<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=MDC&amp;Page=a108056.html#Def_0002">Write</a> string?@pattern<br/>
1<br/>
&gt;</tt>
<table width="91%"><tr>
<td width="13%" align="center"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990c.gif"/></td>
<td width="13%" align="center"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995c.gif"/></td>
<td width="13%" align="center"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCc.gif"/></td>
<td width="13%" align="center"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesc.gif"/></td>
<td width="13%" align="center"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesd.gif"/></td></tr></table>
<p>Copyright &copy; Standard Documents; 1977-2023 MUMPS Development Committee;<br/>
Copyright &copy; Examples: 1995-2023 Ed de Moel;<br/>
Copyright &copy; Annotations: 2003-2008 Jacquard Systems Research<br/>
Copyright &copy; Annotations: 2008-2023 Ed de Moel.</p>
<p><b><i>The information in this page is
NOT authoritative and subject to be modified
at any moment.<br/>Please consult the
appropriate (draft) language standard for an
authoritative definition.</i></b></p>
<p><b><i>Some specifications are "approved
for inclusion in a future standard". Note
that the MUMPS Development Committee cannot
guarantee that such future standards will
indeed be published.</i></b></p>
<p><font size="-1">This page most recently updated on 18-Jul-2022, 16:55:36.</font></p>
<p>For comments, <a href="mailto:demoel@jacquardsystems.com?Subject=Annotated%20Standards%20%28Frame%3dMain%2fPage%3da901017%2fEdition%3d%29">contact Ed de Moel (demoel@jacquardsystems.com)</a></p>
</body>
</html>
