<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"><head><title>The Annotated M[UMPS] Standards</title></head>
<body bgcolor="#4c76ac" text="#ecd264" link="#bca234" vlink="#bca234">
<form method="post" action="AnnoStd.html">
<input type="hidden" name="Frame" value="Search"/>
<input type="text" name="Search" size="20"/>
<input type="submit" value="Search"/></form><table width="91%"><tr>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1977.html"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977a.gif"/></a></td>
<td width="13%" align="center"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984d.gif"/></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1990.html"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1995.html"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=MDC.html"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=notes.html"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=examples.html"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesa.gif"/></a></td></tr>
<tr><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108037&amp;Edition=1984.html"><span style="font-size: 72px">&#9756;</span></a></td><td colspan="5" align="center"><h2>LOCK</h2><h3>1984 Version of ANSI Standard</h3></td><td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108042&amp;Edition=1984.html"><span style="font-size: 72px">&#9758;</span></a></td></tr></table><a name="Def_0001"></a>
<a name="Def_0002"></a>
<a name="Def_0003"></a>
<a name="Def_0004"></a>
<h3>3.6.11 LOCK</h3>
<table><tr>
<td align="center">L[OCK] <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108005.html#Def_0001"><u>postcond</u></a></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ <img alt="Space" align="middle" src="../image/AnnoStd/space.gif"/> ]<br/>
<img alt="Space" align="middle" src="../image/AnnoStd/space.gif"/> <u>L</u> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>
<a name="Def_0005"></a>
<table><tr><td align="center">&nbsp;&nbsp;&nbsp;</td>
<td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a></td><td align="center">::=</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center"><table><tr>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a><br/>
( <u>L</u> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> )</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108008.html#Def_0001"><u>timeout</u></a> ]</td>
</tr></table><br/>
@ <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107002.html#Def_0001"><u>expratom</u></a> <u>V</u> <u>L</u> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> </td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>
<a name="Def_0006"></a>
<table><tr><td align="center">&nbsp;&nbsp;&nbsp;</td>
<td align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a></td><td align="center">::=</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ ^ ] <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a106002.html#Def_0001"><u>name</u></a> [ ( <u>L</u> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107001.html#Def_0001"><u>expr</u></a> ) ]<br/>
@ <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107002.html#Def_0001"><u>expratom</u></a> <u>V</u> <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>
<p>See also the transition diagram for <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a10t047.html#Def_0001"><u>nref</u></a>.</p>
<p>LOCK provides a generalized interlock facility available to
concurrently executing MUMPS processes to be used as appropriate
to the applications being programmed. Execution of LOCK is not
affected by, nor does it directly affect, the state or value of
any global or local variable, or the value to the
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107011.html#Def_0004">naked indicator</a>.</p>
<p>Each <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> specifies a subspace of the total
MUMPS name space for which the executing process seeks to make an
exclusive claim; the details of this subspace specification are
given below. Prior to evaluating and executing each
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a>, LOCK first unconditionally removes any prior
claim on any portion of the name space made by the process as the
result of a prior execution of LOCK. Then, if a
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> is present, an attempt is made to claim the
entire subspace defined by the <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a>. If this
subspace does not intersect the union of all other subspaces
claimed at this instant by all other processes defined by the
implementor as sharing the interlock facility, the claim is
successfully established and execution proceeds to the next
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> or command. If the subspace defined by the
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> intersects any other claimed subspace,
execution of this process is suspended until all interfering
claims are removed by one or more other processes, or, when a
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108008.html#Def_0001"><u>timeout</u></a> is present, until the <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108008.html#Def_0001"><u>timeout</u></a> expires, if
that occurs first.</p>
<p>The subspace defined by one <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> is claimed
effectively all at once or not at all; thus, the observance of
appropriate conventions on the use of the name space by all
concurrently executing processes can eliminate the possibility of
races and deadlocks.</p>
<p>If a <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108008.html#Def_0001"><u>timeout</u></a> is present, the condition reported by
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107074.html#Def_0001">$T</a> upon resumption of execution is the
successful establishment of the claim. If no <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108008.html#Def_0001"><u>timeout</u></a> is
present, execution of the <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> does not change
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a107074.html#Def_0001">$T</a>.</p>
<p>The subspace of the total name space defined by each
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a> 'is the union of the subspaces defined by
each of the name references <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> in the
<a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0005"><u>lockargument</u></a>. Each <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> specifies its subspace as
follows.</p>
<ol type="a">
<li>If the occurrence of <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> is unsubscripted, then the
subspace is the set of the following points: one point for the
unsubscripted variable name nref and one point for each
subscripted variable name N(s<sub>1</sub>, ..., s<sub>i</sub>)
for which N has the same spelling as <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a>.</li>
<li>If the occurrence of <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> is subscripted, then the
subspace is the set of the following points: one point for the
spelling of <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a108040.html#Def_0006"><u>nref</u></a> after all subscripts have been evaluated
and one point for each descendant of nref. (See KILL for a
definition of descendant.)</li>
</ol>
<p>See also the transition diagram for <a href="AnnoStd%EF%B9%96Frame=Main&amp;Edition=1984&amp;Page=a10t022.html#Def_0001">Lock</a>.</p>
<table width="91%"><tr>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1977.html"><img alt="Button for 1977" border="0" src="../image/AnnoStd/1977a.gif"/></a></td>
<td width="13%" align="center"><img alt="Button for 1984" border="0" src="../image/AnnoStd/1984d.gif"/></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1990.html"><img alt="Button for 1990" border="0" src="../image/AnnoStd/1990a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=1995.html"><img alt="Button for 1995" border="0" src="../image/AnnoStd/1995a.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=MDC.html"><img alt="Button for MDC" border="0" src="../image/AnnoStd/MDCa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=notes.html"><img alt="Button for notes" border="0" src="../image/AnnoStd/notesa.gif"/></a></td>
<td width="13%" align="center"><a href="AnnoStd%EF%B9%96Frame=Main&amp;Page=a108040&amp;Edition=examples.html"><img alt="Button for examples" border="0" src="../image/AnnoStd/examplesa.gif"/></a></td></tr></table>
<p>Copyright &copy; Standard Documents; 1977-2023 MUMPS Development Committee;<br/>
Copyright &copy; Examples: 1995-2023 Ed de Moel;<br/>
Copyright &copy; Annotations: 2003-2008 Jacquard Systems Research<br/>
Copyright &copy; Annotations: 2008-2023 Ed de Moel.</p>
<p><font size="-1">This page most recently updated on 13-Sep-2014, 17:15:51.</font></p>
<p>For comments, <a href="mailto:demoel@jacquardsystems.com?Subject=Annotated%20Standards%20%28Frame%3dMain%2fPage%3da108040%2fEdition%3d1984%29">contact Ed de Moel (demoel@jacquardsystems.com)</a></p>
</body>
</html>
